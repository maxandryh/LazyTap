<!DOCTYPE html>
<html>
<head>
    <title>LazyTap Web App</title>
    <style>
        body { text-align: center; font-family: Arial; margin-top: 50px; background-color: #f0f0f0; }
        #tapButton {
            padding: 10px;
            background-color: #ffffff;
            border: 2px solid #00aaff;
            border-radius: 12px;
            cursor: pointer;
            transition: transform 0.1s;
            display: inline-block;
        }
        #tapButton img {
            width: 150px;
        }
        #tapButton:active {
            transform: scale(0.95);
        }
    </style>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <h1>üëã –í—ñ—Ç–∞—é —É LazyTap!</h1>
    <p id="tapCount">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</p>

    <div id="tapButton" onclick="handleTap()">
        <img src="https://cdn-icons-png.flaticon.com/512/1828/1828884.png" alt="Tap Button">
        <p>üîò –¢–ê–ü</p>
    </div>

    <button onclick="Telegram.WebApp.close()">–ó–∞–∫—Ä–∏—Ç–∏</button>

    <script>
        Telegram.WebApp.ready();

        const userId = Telegram.WebApp.initDataUnsafe.user?.id;
        const tapCountElem = document.getElementById('tapCount');
        
        // –§—É–Ω–∫—Ü—ñ—è, —è–∫–∞ –æ–Ω–æ–≤–ª—é—î –ª—ñ—á–∏–ª—å–Ω–∏–∫ —Ç–∞–ø—ñ–≤ —É WebApp
        function updateTapCount(count) {
            tapCountElem.innerText = `–í–∞—à—ñ —Ç–∞–ø–∏: ${count}`;
        }

        // –ü–æ—á–∞—Ç–∫–æ–≤–∏–π –∑–∞–ø–∏—Ç –Ω–∞ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –∫—ñ–ª—å–∫–æ—Å—Ç—ñ —Ç–∞–ø—ñ–≤
        fetch(`https://—Ç–≤—ñ–π_—Å–µ—Ä–≤–µ—Ä_–∞–±–æ_—Å–∞–π—Ç/get_taps?user_id=${userId}`)
            .then(res => res.json())
            .then(data => updateTapCount(data.taps))
            .catch(() => updateTapCount("–ù–µ –≤–¥–∞–ª–æ—Å—è –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏"));

        // –û–±—Ä–æ–±–Ω–∏–∫ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—è –Ω–∞ –∫–Ω–æ–ø–∫—É "–¢–ê–ü"
        function handleTap() {
            Telegram.WebApp.sendData("tap_from_webapp");
        }

        // –û–±—Ä–æ–±–Ω–∏–∫ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –≤—ñ–¥ –±–æ—Ç–∞ (—è–∫—â–æ —Ç—Ä–µ–±–∞)
        Telegram.WebApp.onEvent('mainButtonClicked', () => {
            // –ú–æ–∂–Ω–∞ –¥–æ–¥–∞—Ç–∏ –¥–æ–¥–∞—Ç–∫–æ–≤—É –ª–æ–≥—ñ–∫—É, —è–∫—â–æ —Ö–æ—á–µ—à
        });
    </script>
</body>
</html>
